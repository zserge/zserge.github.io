<!doctype html><html lang=en><head><meta charset=utf-8><title>Let's make the worst VueJS ever!</title><meta name=description content="Learning how VueJS works by building one from scratch."><meta name=author content="Serge Zaitsev"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=data:,><link rel="shortcut icon" sizes=32x32 href=/favicon.png><link rel="shortcut icon" sizes=192x192 href=/favicon-192x192.png><link rel=apple-touch-icon href=/favicon-192x192.png><link rel=alternate type=application/rss+xml title=RSS href=/rss.xml><link rel=canonical href=https://zserge.com/posts/worst-vuejs-ever/><meta property="og:title" content="Let's make the worst VueJS ever!"><meta property="og:type" content="article"><meta property="og:url" content="https://zserge.com/posts/worst-vuejs-ever/"><meta property="og:image" content="https://zserge.com/logo.png"><meta property="og:description" content="Learning how VueJS works by building one from scratch."><meta property="og:locale" content="en_US"><meta name=twitter:card content="Learning how VueJS works by building one from scratch."><meta name=twitter:site content="@zsergo"><style type=text/css>body{padding:1rem;margin:auto;max-width:46rem;font-family:pt serif,Georgia,Cambria,times new roman,Times,serif;line-height:1.5;font-size:20px;color:rgba(0,0,0,.87);-webkit-font-smoothing:antialiased;font-weight:300}nav{display:flex;justify-content:space-between;align-items:center;margin:1em 0 3em}nav ul,nav li{display:inline-block;list-style:none;margin:0 0 0 .5rem;padding:0}nav ul{margin-right:1rem}.logo{background-color:rgba(0,0,0,.87);color:#fff;min-width:48px;min-height:48px;font-size:28px;border-radius:2px;display:flex;justify-content:center;align-items:center}.logo:hover{color:#fff}h1,h2{line-height:1.2;font-family:roboto,system-ui,segoe ui,Helvetica,Arial,sans-serif;font-weight:400;text-transform:uppercase;margin:1.34em 0 0}h1{font-size:1.95em}h2{font-size:1.25em;border-bottom:2px solid rgba(0,0,0,.87)}h1 a{color:rgba(0,0,0,.87)}p{margin:.67em 0 1em}a{color:#0076df;text-decoration:none;word-break:break-word}a:hover{color:rgba(0,0,0,.87)}ul,ol{list-style-position:outside;margin-left:1em}img{display:block;margin-left:auto;margin-right:auto;max-width:100%}pre,code{font-family:roboto mono,SFMono-Regular,Consolas,liberation mono,Menlo,monospace;font-weight:400;font-size:18px;color:rgba(0,0,0,.6);background:#eee}code{padding:.2rem .4rem;font-size:14px;border-radius:2px}pre{overflow-y:auto;line-height:20px;border-radius:2px;padding:1em}pre code{font-size:14px;padding:0;color:rgba(0,0,0,.87)}footer{font-size:12px}@media(prefers-color-scheme:dark){.logo{color:#444;background-color:#e4e4e4}.logo:hover{color:#444}body,h1 a,h2 a{background-color:#444;color:#e4e4e4}pre,pre code{background:#333;color:#e4e4e4}h2{border-bottom:1px solid #e4e4e4}code{color:#aaa;background:#333}a{color:#e39777}a:hover{color:#e4e4e4}img{filter:grayscale(30%)}}.hl{display:block;width:100%;background-color:#ffc}.ow,.gh,.gp,.gs,.gu,.nt,.nn,.ne,.ni,.nc,.kr,.kn,.kd,.kc,.k{font-weight:700}.c,.ch,.cm,.c1,.cs,.ge{color:#777}</style><link rel="shortcut icon" href=/favicon.ico></head><body><header><nav><a class=logo href=/>Z</a><ul><li><a href=/about/>about</a></li><li><a href=/posts/>posts</a></li><li><a href=https://mastodon.social/@zserge rel=me>@me</a></li><li><a href=https://github.com/zserge rel=me>&lt;/>me</a></li></ul></nav></header><div id=content><h1>Let's make the worst VueJS ever!</h1><p>Some time ago I wrote a <a href=/posts/worst-react-ever/>similar post about React</a>, in which with a few lines of code we have built a tiny ReactJS clone from scratch. But React is not the only choice in the modern frontend world, and VueJS is constantly gaining its popularity, so why don&rsquo;t we look deeper into how it works and maybe create a silly educational VueJS-like framework.</p><h2 id=reactivity>Reactivity</h2><p>Like ReactJS, Vue is reactive, meaning that all the changes in the application state are automatically reflected in DOM. But unlike React, Vue keeps track of the dependencies during its render and only updates the related parts without any &ldquo;diffing&rdquo;.</p><p>The key to VueJS reactivity is <code>Object.defineProperty</code> method. It allows to specify a custom getter/setter for an object field and intercept every access to it:</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>obj</span> <span class=o>=</span> <span class=p>{</span><span class=nx>a</span><span class=o>:</span> <span class=mi>1</span><span class=p>};</span>
<span class=nb>Object</span><span class=p>.</span><span class=nx>defineProperty</span><span class=p>(</span><span class=nx>obj</span><span class=p>,</span> <span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=p>{</span>
  <span class=nx>get</span><span class=p>()</span> <span class=p>{</span> <span class=k>return</span> <span class=mi>42</span><span class=p>;</span> <span class=p>},</span>
  <span class=nx>set</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span> <span class=p>{</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;you want to set &#34;a&#34; to&#39;</span><span class=p>,</span> <span class=nx>val</span><span class=p>);</span> <span class=p>}</span>
<span class=p>});</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>obj</span><span class=p>.</span><span class=nx>a</span><span class=p>);</span> <span class=c1>// prints &#39;42&#39;
</span><span class=c1></span><span class=nx>obj</span><span class=p>.</span><span class=nx>a</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>        <span class=c1>// prints &#39;you want to set &#34;a&#34; to 100&#39;
</span></code></pre></div><p>With the help of this, we can now detect when a certain property is accessed or modified and re-evaluate all dependent expressions once the property has changed.</p><h2 id=expressions>Expressions</h2><p>VueJS allows to bind JavaScript expression to a DOM node attribute with a directive. For example, <code>&lt;div v-text="s.toUpperCase()">&lt;/div></code> would set div&rsquo;s text to the upper-case contents of the variable <code>s</code>.</p><p>The simplest approach to evaluate strings, such as <code>s.toUpperCase()</code> is to use <code>eval()</code>. Although eval is never considered a safe solution, we can try making it a little bit safer by wrapping it into a function and passing a special global context to it:</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>call</span> <span class=o>=</span> <span class=p>(</span><span class=nx>expr</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span> <span class=p>=&gt;</span>
  <span class=k>new</span> <span class=nb>Function</span><span class=p>(</span><span class=sb>`with(this){</span><span class=si>${</span><span class=sb>`return </span><span class=si>${</span><span class=nx>expr</span><span class=si>}</span><span class=sb>`</span><span class=si>}</span><span class=sb>}`</span><span class=p>).</span><span class=nx>bind</span><span class=p>(</span><span class=nx>ctx</span><span class=p>)();</span>

<span class=nx>call</span><span class=p>(</span><span class=s1>&#39;2+3&#39;</span><span class=p>,</span> <span class=kc>null</span><span class=p>);</span>                    <span class=c1>// returns 5
</span><span class=c1></span><span class=nx>call</span><span class=p>(</span><span class=s1>&#39;a+1&#39;</span><span class=p>,</span> <span class=p>{</span><span class=nx>a</span><span class=o>:</span><span class=mi>42</span><span class=p>});</span>                  <span class=c1>// returns 43
</span><span class=c1></span><span class=nx>call</span><span class=p>(</span><span class=s1>&#39;s.toUpperCase()&#39;</span><span class=p>,</span> <span class=p>{</span><span class=nx>s</span><span class=o>:</span><span class=s1>&#39;hello&#39;</span><span class=p>});</span> <span class=c1>// returns &#34;HELLO&#34;
</span></code></pre></div><p>This is a little bit more secure than raw <code>eval</code> and is good enough to a simple framework like the one we are building.</p><h2 id=proxies>Proxies</h2><p>Now we can use <code>Object.defineProperty</code> to wrap every data object&rsquo;s property, use <code>call()</code> to evaluate arbitrary expressions, and tell what properties have been directly or indirectly accessed by the expression. We also should be able to tell when the expression has to be re-evaluated because one of its variables have changed:</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=p>{</span><span class=nx>a</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>b</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nx>c</span><span class=o>:</span> <span class=mi>3</span><span class=p>,</span> <span class=nx>d</span><span class=o>:</span> <span class=s1>&#39;foo&#39;</span><span class=p>};</span> <span class=c1>// Data model
</span><span class=c1></span><span class=kr>const</span> <span class=nx>vars</span> <span class=o>=</span> <span class=p>{};</span> <span class=c1>// List of variables used by expression
</span><span class=c1>// Wrap data fields into a proxy that monitors all access
</span><span class=c1></span><span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>name</span> <span class=k>in</span> <span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
  <span class=kd>let</span> <span class=nx>prop</span> <span class=o>=</span> <span class=nx>data</span><span class=p>[</span><span class=nx>name</span><span class=p>];</span>
  <span class=nb>Object</span><span class=p>.</span><span class=nx>defineProperty</span><span class=p>(</span><span class=nx>data</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=p>{</span>
    <span class=nx>get</span><span class=p>()</span> <span class=p>{</span>
      <span class=nx>vars</span><span class=p>[</span><span class=nx>name</span><span class=p>]</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span> <span class=c1>// variable has been accessed
</span><span class=c1></span>      <span class=k>return</span> <span class=nx>prop</span><span class=p>;</span>
    <span class=p>},</span>
    <span class=nx>set</span><span class=p>(</span><span class=nx>val</span><span class=p>)</span> <span class=p>{</span>
      <span class=nx>prop</span> <span class=o>=</span> <span class=nx>val</span><span class=p>;</span>
      <span class=k>if</span> <span class=p>(</span><span class=nx>vars</span><span class=p>[</span><span class=nx>name</span><span class=p>])</span> <span class=p>{</span>
        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Re-evaluate:&#39;</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=s1>&#39;changed&#39;</span><span class=p>);</span>
      <span class=p>}</span>
    <span class=p>}</span>
  <span class=p>});</span>
<span class=p>}</span>
<span class=c1>// Call our expression
</span><span class=c1></span><span class=nx>call</span><span class=p>(</span><span class=s1>&#39;(a+c)*2&#39;</span><span class=p>,</span> <span class=nx>data</span><span class=p>);</span>
<span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>vars</span><span class=p>);</span> <span class=c1>// {&#34;a&#34;: true, &#34;c&#34;: true} -- these two variables have been accessed
</span><span class=c1></span><span class=nx>data</span><span class=p>.</span><span class=nx>a</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>  <span class=c1>// Prints &#34;Re-evaluate: a changed&#34;
</span><span class=c1></span><span class=nx>data</span><span class=p>.</span><span class=nx>b</span> <span class=o>=</span> <span class=mi>7</span><span class=p>;</span>  <span class=c1>// Prints nothing, this variable does not affect the expression
</span><span class=c1></span><span class=nx>data</span><span class=p>.</span><span class=nx>c</span> <span class=o>=</span> <span class=mi>11</span><span class=p>;</span> <span class=c1>// Prints &#34;Re-evaluate: c changed&#34;
</span><span class=c1></span><span class=nx>data</span><span class=p>.</span><span class=nx>d</span> <span class=o>=</span> <span class=mi>13</span><span class=p>;</span> <span class=c1>// Prints nothing.
</span></code></pre></div><h2 id=directives>Directives</h2><p>Now we can evaluate arbitrary expressions and keep track of which expressions to evaluate when one particular data variable changes. The only thing left is to assign expressions to certain DOM node properties and actually change them when data changes.</p><p>Like in VueJS, we will be using special attributes, such as <code>q-on:click</code> to bind event listeners, <code>q-text</code> to bind textContent, <code>q-bind:style</code> to bind CSS style and so on. I&rsquo;m using &ldquo;q-&rdquo; prefix here because &ldquo;q&rdquo; sounds similar to &ldquo;vue&rdquo;.</p><p>Here&rsquo;s an incomplete list of possibly supported directives:</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>directives</span> <span class=o>=</span> <span class=p>{</span>
  <span class=c1>// Bind innerText to an expression value
</span><span class=c1></span>  <span class=nx>text</span><span class=o>:</span> <span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>val</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>(</span><span class=nx>el</span><span class=p>.</span><span class=nx>innerText</span> <span class=o>=</span> <span class=nx>call</span><span class=p>(</span><span class=nx>val</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)),</span>
  <span class=c1>// Bind event listener
</span><span class=c1></span>  <span class=nx>on</span><span class=o>:</span> <span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>val</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>(</span><span class=nx>el</span><span class=p>[</span><span class=sb>`on</span><span class=si>${</span><span class=nx>name</span><span class=si>}</span><span class=sb>`</span><span class=p>]</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>call</span><span class=p>(</span><span class=nx>val</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)),</span>
  <span class=c1>// Bind node attribute to an expression value
</span><span class=c1></span>  <span class=nx>bind</span><span class=o>:</span> <span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=nx>value</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>el</span><span class=p>.</span><span class=nx>setAttribute</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span> <span class=nx>call</span><span class=p>(</span><span class=nx>value</span><span class=p>,</span> <span class=nx>ctx</span><span class=p>)),</span>
<span class=p>};</span>
</code></pre></div><p>Each directive is a function that takes the DOM node, optional parameter name for cases like <code>q-on:click</code> (name would be &ldquo;click&rdquo;). It also takes an expression string (<code>value</code>) and a data object to use as an expression context.</p><p>Now we have all building blocks ready, time to glue it all together!</p><h2 id=end-result>End result</h2><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>call</span> <span class=o>=</span> <span class=p>....</span>       <span class=c1>// Our &#34;safe&#34; expression evaluator
</span><span class=c1></span><span class=kr>const</span> <span class=nx>directives</span> <span class=o>=</span> <span class=p>....</span> <span class=c1>// Our supported directives
</span><span class=c1></span>
<span class=c1>// Currently evaluated directive, proxy uses it as a dependency
</span><span class=c1>// of the individual variables accessed during directive evaluation
</span><span class=c1></span><span class=kd>let</span> <span class=nx>$dep</span><span class=p>;</span>

<span class=c1>// A function to iterate over DOM node and its child nodes, scanning all
</span><span class=c1>// attributes and binding them as directives if needed
</span><span class=c1></span><span class=kr>const</span> <span class=nx>walk</span> <span class=o>=</span> <span class=p>(</span><span class=nx>node</span><span class=p>,</span> <span class=nx>q</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=c1>// Iterate node attributes
</span><span class=c1></span>  <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=p>{</span><span class=nx>name</span><span class=p>,</span> <span class=nx>value</span><span class=p>}</span> <span class=k>of</span> <span class=nx>node</span><span class=p>.</span><span class=nx>attributes</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>if</span> <span class=p>(</span><span class=nx>name</span><span class=p>.</span><span class=nx>startsWith</span><span class=p>(</span><span class=s1>&#39;q-&#39;</span><span class=p>))</span> <span class=p>{</span>
      <span class=kr>const</span> <span class=p>[</span><span class=nx>directive</span><span class=p>,</span> <span class=nx>event</span><span class=p>]</span> <span class=o>=</span> <span class=nx>name</span><span class=p>.</span><span class=nx>substring</span><span class=p>(</span><span class=mi>2</span><span class=p>).</span><span class=nx>split</span><span class=p>(</span><span class=s1>&#39;:&#39;</span><span class=p>);</span>
      <span class=kr>const</span> <span class=nx>d</span> <span class=o>=</span> <span class=nx>directives</span><span class=p>[</span><span class=nx>directive</span><span class=p>];</span>
      <span class=c1>// Set $dep to re-evaluate this directive
</span><span class=c1></span>      <span class=nx>$dep</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>d</span><span class=p>(</span><span class=nx>node</span><span class=p>,</span> <span class=nx>event</span><span class=p>,</span> <span class=nx>value</span><span class=p>,</span> <span class=nx>q</span><span class=p>);</span>
      <span class=c1>// Evaluate directive for the first time
</span><span class=c1></span>      <span class=nx>$dep</span><span class=p>();</span>
      <span class=c1>// And clear $dep after we are done
</span><span class=c1></span>      <span class=nx>$dep</span> <span class=o>=</span> <span class=kc>undefined</span><span class=p>;</span>
    <span class=p>}</span>
  <span class=p>}</span>
  <span class=c1>// Walk through child nodes
</span><span class=c1></span>  <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>child</span> <span class=k>of</span> <span class=nx>node</span><span class=p>.</span><span class=nx>children</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>walk</span><span class=p>(</span><span class=nx>child</span><span class=p>,</span> <span class=nx>q</span><span class=p>);</span>
  <span class=p>}</span>
<span class=p>};</span>

<span class=c1>// Proxy uses Object.defineProperty to intercept access to
</span><span class=c1>// all `q` data object properties.
</span><span class=c1></span><span class=kr>const</span> <span class=nx>proxy</span> <span class=o>=</span> <span class=nx>q</span> <span class=p>=&gt;</span> <span class=p>{</span>
  <span class=kr>const</span> <span class=nx>deps</span> <span class=o>=</span> <span class=p>{};</span> <span class=c1>// Dependent directives of the given data object
</span><span class=c1></span>  <span class=k>for</span> <span class=p>(</span><span class=kr>const</span> <span class=nx>name</span> <span class=k>in</span> <span class=nx>q</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>deps</span><span class=p>[</span><span class=nx>name</span><span class=p>]</span> <span class=o>=</span> <span class=p>[];</span> <span class=c1>// Dependent directives of the given property
</span><span class=c1></span>    <span class=kd>let</span> <span class=nx>prop</span> <span class=o>=</span> <span class=nx>q</span><span class=p>[</span><span class=nx>name</span><span class=p>];</span>
    <span class=nb>Object</span><span class=p>.</span><span class=nx>defineProperty</span><span class=p>(</span><span class=nx>q</span><span class=p>,</span> <span class=nx>name</span><span class=p>,</span> <span class=p>{</span>
      <span class=nx>get</span><span class=p>()</span> <span class=p>{</span>
        <span class=k>if</span> <span class=p>(</span><span class=nx>$dep</span><span class=p>)</span> <span class=p>{</span>
          <span class=c1>// Property has been accessed.
</span><span class=c1></span>          <span class=c1>// Add current directive to the dependency list.
</span><span class=c1></span>          <span class=nx>deps</span><span class=p>[</span><span class=nx>name</span><span class=p>].</span><span class=nx>push</span><span class=p>(</span><span class=nx>$dep</span><span class=p>);</span>
        <span class=p>}</span>
        <span class=k>return</span> <span class=nx>prop</span><span class=p>;</span>
      <span class=p>},</span>
      <span class=nx>set</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=p>{</span> <span class=nx>prop</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span> <span class=p>},</span>
    <span class=p>});</span>
  <span class=p>}</span>
  <span class=k>return</span> <span class=nx>q</span><span class=p>;</span>
<span class=p>};</span>

<span class=c1>// Main entry point: apply data object &#34;q&#34; to the DOM tree at root &#34;el&#34;.
</span><span class=c1></span><span class=kr>const</span> <span class=nx>Q</span> <span class=o>=</span> <span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>q</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>walk</span><span class=p>(</span><span class=nx>el</span><span class=p>,</span> <span class=nx>proxy</span><span class=p>(</span><span class=nx>q</span><span class=p>));</span>
</code></pre></div><p>This is the whole reactive Vue-like framework in all its glory. How useful is it? Well, here&rsquo;s an example:</p><div class=highlight><pre class=chroma><code class=language-html data-lang=html><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;counter&#34;</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>button</span> <span class=na>q-on:click</span><span class=o>=</span><span class=s>&#34;clicks++&#34;</span><span class=p>&gt;</span>Click me<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>button</span> <span class=na>q-on:click</span><span class=o>=</span><span class=s>&#34;clicks=0&#34;</span><span class=p>&gt;</span>Reset<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>p</span> <span class=na>q-text</span><span class=o>=</span><span class=s>&#34;`Clicked ${clicks} times`&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>

Q(counter, {clicks: 0});
</code></pre></div><p>Clicking on one button increments the counter and updates <code>&lt;p></code> contents automatically. Clicking on another one sets the count to zero and also updates the text.</p><p>As you see, VueJS might appear magical at a first glance, but inside it turns our to be very simple and the core functionality can be implemented in just a few lines of code.</p><h2 id=further-steps>Further steps</h2><p>If you are curious about VueJS - try implementing &ldquo;q-if&rdquo; to toggle element visibility based on the expression, or &ldquo;q-each&rdquo; to bind lists of repeating child elements (this might be an interesting exercise).</p><p>The complete sources of the Q nano-framework are on Github: <a href=https://github.com/zserge/q>https://github.com/zserge/q</a>. Feel free to contribute if you spot an issue or have an improvement to suggest!</p><p>As a closing note, I have to mention that <code>Object.defineProperty</code> has been used by Vue 2, while in Vue 3 they have switched to a different mechanism, provided by ES6 - namely, <code>Proxy</code> and <code>Reflect</code>. Proxy allows to pass a handler to intercept object properties access, much like we did in our example, while Reflect allows to access object properties from inside the Proxy and keep <code>this</code> object intact (unlike in our example with defineProperty).</p><p>I leave both Proxy/Reflect as an exercise to the reader, so whoever makes the PR to use them correctly in <a href=https://github.com/zserge/q>Q</a> - I&rsquo;ll be happy to merge it. Have fun!</p><p>I hope you’ve enjoyed this article. You can follow – and contribute to – on <a href=https://github.com/zserge>Github</a>, <a href=https://mastodon.social/@zserge>Mastodon</a>, <a href=https://twitter.com/zsergo>Twitter</a> or subscribe via <a href=/rss.xml>rss</a>.</p><p class=date style=text-align:right><em>Feb 07, 2021</em></p><p>See also:
<a href=/posts/worst-react-ever/>Let's make the worst React ever!</a> and <a href=/posts/>more</a>.</p></div><footer><p>&copy;2012&ndash;2025 &#183;
<a class=h-card rel=me href=https://zserge.com/>Serge Zaitsev</a> &#183;
<a href=mailto:hello@zserge.com rel=me>hello@zserge.com</a> &#183;
<a href=https://mastodon.social/@zserge rel=me>@zserge@mastodon.social</a></p></footer><script>new Image().src='https://nullitics.com/file.gif?u='+encodeURI(location.href)+'&r='+encodeURI(document.referrer)+'&d='+screen.width</script><noscript><img src=https://nullitics.com/file.gif></noscript></body></html>